/*!
 * express
 * Copyright(c) 2009-2013 TJ Holowaychuk
 * Copyright(c) 2013 Roman Shtylman
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */

'use strict';

module.exports = require('./lib/express');


var express = require('express'); 
const cors = require('cors');
// var bodyParser = require("body-parser");
const ytdl = require('ytdl-core');
var app = express();  
var PORT = 5005; 
 
const path = require('path');

app.use(cors());
app.use(express.static(path.join(__dirname, '../../')));


app.listen(PORT, function(err){ 
    if (err) console.log(err); 
    console.log("Server listening on PORT", PORT); 
});



app.get('/', (req, res) => { 
    res.sendFile('../../index.html');
});


app.get('/song', function (req, res) { 
    var url = req.query.url;
    res.header('Content-Disposition', 'attachment; filename="video.mp3"');
    ytdl(url, {format: 'mp4'}).pipe(res);
}); 


  


